<form id="reportForm" class="box">
  <textarea name="report" id="reportInput" rows="6" placeholder="Describe narcotic activity..." required></textarea>
  <input type="hidden" name="_captcha" value="false">
  <button type="submit" class="btn">üì§ Submit Report</button>
</form>

<script>
  const darkBtn = document.getElementById("darkModeToggle");

  if (localStorage.getItem("theme") === "dark") {
    document.body.classList.add("dark-mode");
    darkBtn.textContent = "‚òÄÔ∏è";
  }

  darkBtn.addEventListener("click", () => {
    document.body.classList.toggle("dark-mode");
    const isDark = document.body.classList.contains("dark-mode");
    localStorage.setItem("theme", isDark ? "dark" : "light");
    darkBtn.textContent = isDark ? "‚òÄÔ∏è" : "üåô";
  });

  document.getElementById("reportForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);

    try {
      const res = await fetch("https://formspree.io/f/mgvyljbb", {
        method: "POST",
        body: formData,
        headers: { Accept: "application/json" }
      });

      if (res.ok) {
        alert("‚úÖ Report submitted anonymously!");
        document.getElementById("reportInput").value = "";
      } else {
        alert("‚ùå Failed to submit. Try again later.");
      }
    } catch (error) {
      alert("‚ö†Ô∏è Network error. Please try again.");
    }
  });
</script>
