<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Therapy Chat – NarcStop AI</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <!-- Navbar -->
  <nav role="navigation" aria-label="Main Navigation">
    <div class="logo">🧠 NarcStop AI</div>
    <button 
      class="menu-toggle" 
      aria-label="Toggle menu" 
      aria-expanded="false" 
      aria-controls="primary-navigation"
      id="menuToggleBtn"
    >☰</button>
    <ul class="nav-links" id="primary-navigation">
      <li><a href="index.html">Home</a></li>
      <li><a href="report.html">Report</a></li>
      <li><a href="therapy.html" class="active" aria-current="page">Therapy Chat</a></li>
      <li><a href="dashboard.html">Dashboard</a></li>
      <li><a href="resources.html">Resources</a></li>
      <li><a href="sos.html">Relapse SOS</a></li>
      <li><a href="feedback.html">Feedback</a></li>
    </ul>
    <button id="darkModeToggle" title="Toggle dark mode" aria-pressed="false">🌙</button>
  </nav>

  <!-- Main Content -->
  <main class="page-content">
    <h1>💬 Therapy Chat</h1>
    <p>Chat anonymously with our AI therapy assistant. We're here to support your recovery journey.</p>

    <section class="card" aria-label="AI Therapy Chatbot">
      <iframe
        src="https://www.chatbase.co/chatbot-iframe/0xcpuX5tzydy-wZpZ44vA"
        title="Therapy Chat"
        allow="clipboard-write"
        loading="lazy"
      ></iframe>
    </section>

    <p style="text-align:center; margin-top: 1rem;">
      <strong>Need to talk to a real person?</strong><br />
      <a href="tel:1933" class="btn" aria-label="Call 1933 helpline in India">📞 Call 1933 (India)</a>
    </p>
  </main>

  <footer>
    <p>&copy; 2025 NarcStop AI | Providing mental health support and guidance</p>
  </footer>

  <script>
    // Dark Mode Toggle
    const toggleBtn = document.getElementById("darkModeToggle");

    // Load theme from localStorage
    if (localStorage.getItem("theme") === "dark") {
      document.body.classList.add("dark-mode");
      toggleBtn.textContent = "☀️";
      toggleBtn.setAttribute("aria-pressed", "true");
    }

    toggleBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark-mode");
      const isDark = document.body.classList.contains("dark-mode");
      localStorage.setItem("theme", isDark ? "dark" : "light");
      toggleBtn.textContent = isDark ? "☀️" : "🌙";
      toggleBtn.setAttribute("aria-pressed", isDark.toString());
    });

    // Hamburger menu toggle with accessibility
    const menuToggle = document.querySelector('.menu-toggle');
    const navLinks = document.querySelector('.nav-links');

    menuToggle.addEventListener('click', () => {
      const isActive = navLinks.classList.toggle('active');
      menuToggle.setAttribute('aria-expanded', isActive.toString());
    });
  </script>
</body>
</html>
